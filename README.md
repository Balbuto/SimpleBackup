# SimpleBackup üõ°Ô∏è

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π Bash-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö PostgreSQL, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö. –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Å–∏—Å—Ç–µ–º –≤—Ä–æ–¥–µ RemnaShop.

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–£–º–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—â–µ—Ç —Ñ–∞–π–ª .env –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î (DATABASE_NAME, DATABASE_USER, DATABASE_PASSWORD, DATABASE_HOST).
–†–∞–±–æ—Ç–∞ —Å Docker: –í—ã–ø–æ–ª–Ω—è–µ—Ç pg_dump –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PostgreSQL –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—É.
–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é: –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–ë—ç–∫–∞–ø, –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ, –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π).

## –°–∏—Å—Ç–µ–º–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:

–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (Wipe) –∏–ª–∏ –∑–∞–ø–∏—Å–∏ –ø–æ–≤–µ—Ä—Ö.
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ –Ω–µ–ø—É—Å—Ç—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö.
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –æ—Ç—á–µ—Ç—ã: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ñ–∞–π–ª–æ–≤ –±—ç–∫–∞–ø–∞ –≤ Telegram –∏ –Ω–∞ E-mail.
–°–∞–º–æ–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ root –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (curl, mutt, docker –∏ –¥—Ä.).
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –°–∫—Ä—ã—Ç—ã–π –≤–≤–æ–¥ –ø–∞—Ä–æ–ª–µ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
–°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ Linux (Ubuntu/Debian).

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–æ—á—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Ç—Ä–µ–±—É—é—Ç—Å—è:

Telegram Bot Token & Chat ID.
–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ—á—Ç–æ–≤—ã–π –∞–≥–µ–Ω—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è mutt).


## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

### git clone https://github.com/Balbuto/SimpleBackup.git
### cd SimpleBackup

2. –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:

### chmod +x simple_backup.sh

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª backup.conf, –≤—Å—Ç–∞–≤–∏–≤ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (backup.conf)
–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª backup.conf –ª—é–±—ã–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º:

Telegram
TG_TOKEN="123456789:ABCDef..." # –¢–æ–∫–µ–Ω –æ—Ç @BotFather
TG_CHAT_ID="987654321"         # –í–∞—à ID (–º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å —É @userinfobot)

Email
ADMIN_EMAIL="admin@example.com"

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: 1-TG, 2-Email, 3-–û–±–∞, 4-–¢–∏—Ö–∏–π —Ä–µ–∂–∏–º
DEFAULT_NOTIFY_MODE="3"

–ü—É—Ç—å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –±—ç–∫–∞–ø–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_BACKUP_DEST="/var/backups/projects"


## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ—Ç –∏–º–µ–Ω–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

### sudo ./simple_backup.sh

–ü—É–Ω–∫—Ç—ã –º–µ–Ω—é:
1. –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø: –°–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É, –Ω–∞–π–¥–µ—Ç .env, —Å–æ–∑–¥–∞—Å—Ç –¥–∞–º–ø—ã –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Ç—á–µ—Ç—ã.
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: –ü–æ–∑–≤–æ–ª–∏—Ç –≤—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±—ç–∫–∞–ø–æ–≤ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ –ø–∞–ø–∫—É.
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –ë—ã—Å—Ç—Ä–∞—è —Å–º–µ–Ω–∞ –∫–∞–Ω–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ Telegram).


## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è (Cron)
–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 02:00 –Ω–æ—á–∏) –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–∞—á—É –≤ cron:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä: sudo crontab -e
2. –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (—Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .conf):
   0 2 * * * /path/to/SimpleBackup/simple_backup.sh --auto >> /var/log/simple_backup.log 2>&1
   
(–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¥–ª—è –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–µ–∑ —É—á–∞—Å—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ .env –∏–ª–∏ .conf –ø—Ä–æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ –ø—É—Ç–∏).

## ‚ö†Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–§–∞–π–ª backup.conf —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ç–æ–∫–µ–Ω—ã). –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É:

### chmod 600 backup.conf
